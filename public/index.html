<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="stylesheet" type="text/css" href="/prism.css" />

    <title>cesarFuhr.dev</title>
    <link rel="icon" href="/images/cesar_gopher.ico">
  </head>

  <body>
    <a id="top"></a>
    <nav class="navbar-wrapper">
      <ul class="navbar" id="navbar">
        <li class="navbar-header">
          <div class="navbar-brand">
            <a class="nav-link" href="/">
              <img src="/images/cesar_gopher.png" id="gopher"/>
            </a>
            <a class="nav-link" href="/">cesarfuhr.dev</a>
          </div>
          <a class="nav-icon" href="javascript:void(0)" onclick="dropMenu()">||</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/archive.html">Archive</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about.html">About</a>
        </li>
        <!--- <li class="nav-item">
          <a class="nav-link" href="cesarfuhr.rss">RSS</a>
          </li> --->
      </ul>
    </nav>

    <main>

      <header>
        <a id="title"></a>
        <p class="date">January 7th, 2022</p>
        <h1>Simple rules to avoid some "for range" pitfalls</h1>
        <h4 class="subtitle">Memory efficiency of the Go for range syntax and its implications.</h4>
      </header>

      <section class="text">

        <p>Memory efficiency is something worth aiming for. In the "pay what you use era" it can be a critical factor in the bill.</p>
        <p>With that in mind, the engineers behind Go's development designed a simple, yet efficient, way to iterate over arrays, slices, maps, strings and channels. Each data structure has its own implementation and the iteration over its values is slightly different.</p>
        <ul>
          <li>Maps have a randomized access, you should not rely on its order.</li>
          <li>Strings actually iterate over unicode points, sometimes this means multiple bytes.</li>
          <li>Slices and arrays are the simplest, iteration over the values preserving their order.</li>
          <li>Ranging over channels blocks until it is closed.</li>
        </ul>

        <p>But how this relates with memory efficiency?</p>

        <p>Well, think about it, where these values that you are accessing are being stored?</p>

        <a id="dissecting-for-range" href="#dissecting-for-range">
          <h2>Dissecting "for range"</h2>
        </a>

        <img src="/images/range_dissect.png" id="range-dissect"/>


      </section>
      <footer>
        <a href="/blog/how-hard-could-it-be-to-code-a-simple-https-server-with-go.html">prev</a>
        <a href="#top">top</a>
      </footer>
    </main>

    <script src="/js/dropMenu.js"  type="text/javascript"></script>
    <script src="/js/prism.js"     type="text/javascript"></script>
  </body>
</html>
